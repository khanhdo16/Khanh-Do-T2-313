<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <title>iService</title>
    
    <!-- Bootstrap core CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">

    <!-- Custom styles for this template -->
    <link href="/css/main.css" rel="stylesheet">
  </head>
  <body class="text-center">
    <main class="form-container">
      <h1 class="fw-normal">iService</h1>

      <form id='form' novalidate>
        <h3 class="mb-3 fw-normal">Reset your account password</h3>

        <div id='alert'></div>

        <div class="form-floating mb-3">
            <input type="email" class="form-control" id="email" placeholder="name@example.com" required>
            <label for="email">Email address*</label>
        </div>

        <button class="w-100 btn btn-lg btn-primary" type="submit" form="form">Reset password</button>

      </form>
      <p class="mt-4 mb-3 text-muted">&copy; 2021 iService</p>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-U1DAWAznBHeqEIlVSCgzq+c9gqGAJn5c/t99JyeKa9xxaYpSvHU5awsuZVVFIhvj" crossorigin="anonymous"></script>
    <script>
      const form = document.getElementById('form');

      form.addEventListener('submit', (event) => {
        event.preventDefault();

        let fields = form.elements;
        let data = {};
        data[fields.email.id] = fields.email.value;

        const xhttp = new XMLHttpRequest();

        xhttp.onreadystatechange = function() {
          if (this.readyState == 4) {
            if (this.status == 200) {
                const alert = document.getElementById('alert');
                alert.innerHTML = '<div class="alert alert-success alert-dismissible fade show" role="alert">' +
                    'If the account with this email exists, you will receive the instructions in the mailbox within a few minutes.' +
                    '<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button></div>';
                new bootstrap.Alert(alert);
            }
          }
        };

        xhttp.open("POST", "/custforgot.html");
        xhttp.setRequestHeader("Content-type", "application/json", true);
        xhttp.send(JSON.stringify(data));
      })
    </script>
  </body>
</html>
